<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="Beautiful Now!">
<meta property="og:type" content="website">
<meta property="og:title" content="Qsc&#39;s Blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Qsc&#39;s Blog">
<meta property="og:description" content="Beautiful Now!">
<meta property="og:locale">
<meta property="article:author" content="qishicheng">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://example.com/"/>





  <title>Qsc's Blog</title>
  








<meta name="generator" content="Hexo 5.4.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Qsc's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/08/04/%E5%A4%9A%E6%A8%A1%E6%80%81%E8%9E%8D%E5%90%88%E6%A6%82%E8%BF%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/7484348e1e863797925e9869687131b3.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qsc's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/08/04/%E5%A4%9A%E6%A8%A1%E6%80%81%E8%9E%8D%E5%90%88%E6%A6%82%E8%BF%B0/" itemprop="url">多模态融合概述</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-08-04T09:06:43+08:00">
                2021-08-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A4%9A%E6%A8%A1%E6%80%81/" itemprop="url" rel="index">
                    <span itemprop="name">多模态</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>写在前面：本文虽然是多模态融合概述，但重点是在于如何融合不同图片的信息，因此就做简要概述以及对重点内容进行记录。</strong></p>
<h2 id="一、How-to-fuse"><a href="#一、How-to-fuse" class="headerlink" title="一、How to fuse"></a>一、How to fuse</h2><ul>
<li>相加或者平均：逐元素相加或者对应元素求平均值</li>
<li>拼接：将特征图按照通道堆叠</li>
<li>集成：常用于目标检测，将<code>ROI</code>进行合并</li>
<li>专家合并：专家混合方法则希望通过模型<em>显式的</em>建模特征图的权重。</li>
</ul>
<h2 id="二、When-to-fuse"><a href="#二、When-to-fuse" class="headerlink" title="二、When to fuse"></a>二、When to fuse</h2><ul>
<li><p>前融合<code>early fusion</code>：直接融合原始数据</p>
<ul>
<li>优点：直接利用信息量，可以降低整体内存消耗</li>
<li>缺点：模型的灵活性下降</li>
</ul>
</li>
<li><p>后融合<code>late fusion</code>：对每一个模态的检测/识别结果进行融合</p>
<ul>
<li>优点：高度灵活与模块化，引入新模态不会对其他网络造成影响</li>
<li>缺点：高运算、耗费内存、丢失了模态融合有益的中间信息</li>
</ul>
</li>
<li><p>中间融合<code>middle fusion</code>：对不同模态的特征进行融合</p>
</li>
</ul>
<h2 id="三、针对本问题下的融合策略"><a href="#三、针对本问题下的融合策略" class="headerlink" title="三、针对本问题下的融合策略"></a>三、针对本问题下的融合策略</h2><ul>
<li>前融合：用<code>3D</code>卷积得到特征图，再接上原来的网络。<strong>这个主要用于处理视频流，不建议使用</strong></li>
<li>中间融合：这里有一个问题在于，从不同角度得到的<code>feature maps</code>，需要设计一个专门的模块来做融合，而不是简单的堆叠/相加。<ul>
<li>首先要区分多模态融合。不是用简单的融合即可，不同视角间的图片融合，要考虑到特征坐标对应的变化</li>
<li>重点是其他四张特征图辅助中间的特征图，要做左右平移变化，保证其特征的对应，但是这为什么不在决策层融合更好呢？同时还有个疑问是，我特征融合是为了增强该区域的特征表象，但一些物体从人眼的角度都无法获取，再增强特征图有何用？</li>
<li>如果是对<code>ROI</code>进行融合，无异于后融合策略。</li>
<li>特征提取共享权值，使用同一个网络；接着对特征图进行变换(显式/隐式)；之后对得到的特征图融合，最后输出结果。</li>
<li>该类型是<strong>同一模态下不同视角的融合问题</strong>。</li>
</ul>
</li>
<li>后融合：因为对于每张图片的精确率与误检率都达到了要求，同时在不同机位下人相对于图片的位置大概是固定的，我个人觉得设计一个集合策略是最佳的方案，省时间，同时效率高。<ul>
<li>首先继续在一张图片上调参，争取<code>precision&gt;97%,recall&gt;97%</code></li>
<li>将五张图的<code>det_bbox</code>首先集合到一张图片上，这里需要做一点小改动，对侧边的框加一些水平平移/或旋转</li>
<li>利用<code>NMS</code>将冗余框剔除</li>
</ul>
</li>
</ul>
<p><strong>我个人觉得，多模态的意义在于，每种模态对其检测或分割均具有一定的局限性，因此要将多种局限性的数据融合到一起。但目前来看，五张图片的数据均达到了一个不错的效果，同时尽管角度不同，但人相对于图片的位置大概是固定的，坐标变换非常简单。如果采用中间融合，工作量大，还需要自主设计融合模块，但不能保证效果好。因此我个人觉得在决策层上的融合更加方便且容易，同时还能保证一个精度与误检率。</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/30/%E7%A0%94%E7%A9%B6%E7%94%9F%E5%9F%B9%E5%85%BB%E8%AE%A1%E5%88%92/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/7484348e1e863797925e9869687131b3.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qsc's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/07/30/%E7%A0%94%E7%A9%B6%E7%94%9F%E5%9F%B9%E5%85%BB%E8%AE%A1%E5%88%92/" itemprop="url">研究生培养计划</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-07-30T17:49:27+08:00">
                2021-07-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%88%90%E9%95%BF%E8%AE%B0%E5%BD%95/" itemprop="url" rel="index">
                    <span itemprop="name">成长记录</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>写在前面：</strong></p>
<p>​    因为经历了本科的四年，给我最大的感受就是，我本科唯一清楚自己要什么的，就是保研，就纯粹想偷半年的懒，但我觉得这事不能再在我的研究生阶段发生了。既然我又选择逃避入世，那么就在我最后这象牙塔中的三年，好好想想自己要什么，考虑如何能让自己不虚度这三年的时光，踏踏实实地做点东西。</p>
<p>​    首先我要明确一些事情，我的研究方向是什么，我要培养我的哪些能力，在日后的工作中，需要我的哪些能力亦或我的哪些优势可以让我变得突出。</p>
<p><strong>研究方向：</strong></p>
<p>​    本人的大类方向是计算机视觉，细化来说包括但不限于以下方向：</p>
<ul>
<li><code>Deepfake</code>，人脸替换</li>
<li><code>Detection</code>，目标检测</li>
<li><code>Multimodal</code>，多模态，其主要应用于目标检测</li>
<li><code>Adversarial Attacks</code>，对抗攻击，主要应用于人脸替换</li>
<li>待补充。。。</li>
</ul>
<p><strong>研究生期间所需要培养的能力</strong>：</p>
<ul>
<li><p>核心能力：创新型，通过广泛地阅读论文与不断的头脑风暴，生成新的有意思的<code>idea</code></p>
</li>
<li><p>代码能力：</p>
<ul>
<li>可以快速将<code>idea</code>落地，就必须快速掌握至少<code>pytorch、tensorflow</code>两个主流的深度学习框架</li>
<li><code>leetcode</code>能力，换句话说就是常见的数据结构与动态规划等题目，这样在掌握了深度学习框架之后，可以更加高效地对网络进行编程</li>
<li>基于<code>linux</code>的编程，目前大多数或者说全部上已经是<code>linux</code>开发，因此脚本式语言需要掌握</li>
</ul>
</li>
<li><p>结果性能力：</p>
<ul>
<li>论文的产出，这是标志性的东西，也是成果化最重要的指标</li>
<li><code>github</code>仓库积累，同样也要熟练使用<code>git</code></li>
<li>博客积累，一个良好的程序员要善于编写博客，日积月累</li>
</ul>
</li>
<li><p>以上是按照一个<code>CTO</code>或者说一个高级研究员的发展标准，至于在计算机视觉之外的，我需要了解如下能力：</p>
<ul>
<li>互联网行业的发展</li>
<li>心理学的培养，最终培养自己较强的心理素质</li>
<li>身体素质保养，其中包括运动(篮球、羽毛球等)、塑性、外貌、穿着等等</li>
<li>兴趣培养，其中包括做饭、摄影、汽车、旅游等行业</li>
<li>家庭观念的塑造</li>
</ul>
</li>
</ul>
<p><strong>需要养成的习惯或素质：</strong></p>
<p>​    我一直将学习、身体、生活分开，其中这些无不穿插在每天的生活当中，因此这些其实可以归结为一起，从而在研究生期间，非日常性活动之外，保持如下生活习惯：</p>
<ul>
<li>以家庭为前提，进行所有提升自我的事情</li>
<li>一周按照<code>996</code>的工作方式，其中前五天重视于前两能力的培养，第六天重视结果性能力，第七天注重于其他能力的培养，晚上如果有运动，可不学习</li>
<li>每天要写总结，每周要写周报，将所学之事进行记录，变成自己的东西</li>
<li><strong>耐住寂寞，沉得下心，走好每一个过程，全力以赴去追逐，但最终坦然面对结果</strong></li>
<li>每天达到<code>8</code>个小时的睡眠，少喝酒，严禁抽烟，同时忌糖！</li>
</ul>
<p><strong>最终给自己三年定下一些目标：</strong></p>
<ul>
<li>一篇<code>A</code>类与一篇<code>sci</code>，几区的都可以</li>
<li>几个拿得出手的项目</li>
<li>一段很高的实习，至少是<code>AI</code>研发</li>
<li>一个对得起自己的毕业设计</li>
<li>一份满意的工作</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/29/%E6%AF%8F%E6%97%A5%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/7484348e1e863797925e9869687131b3.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qsc's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/07/29/%E6%AF%8F%E6%97%A5%E6%80%BB%E7%BB%93/" itemprop="url">每日总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-07-29T21:22:55+08:00">
                2021-07-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%88%90%E9%95%BF%E8%AE%B0%E5%BD%95/" itemprop="url" rel="index">
                    <span itemprop="name">成长记录</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="2021-7-29"><a href="#2021-7-29" class="headerlink" title="2021.7.29"></a>2021.7.29</h2><p>今日完成：</p>
<ul>
<li>搭建博客，之前那个太花里胡哨，而且不好利用<code>markdown</code>，所以换了这个大众的。</li>
<li>重新学习目标检测中的评价指标，<code>faster rcnn</code>中的<code>loss</code>与<code>NMS</code>使用方法，并结合<code>mmdetection</code>的代码加以巩固。<strong>纸上得来终觉浅，绝知此事要躬行！</strong></li>
<li>尝试修改<code>mmdetection</code>未果，只能利用<code>demo.py</code>，生成预测结果。</li>
</ul>
<p>明日计划：</p>
<ul>
<li>计算<code>det_bbox</code>与<code>gt_bbox</code>的<code>tp,fp</code>，从而计算<code>detr</code>的<code>precision,recall</code>，至此太赫兹项目第一部分完成，后面的等老师自行安排吧。</li>
<li>将所有博客重新整理，而不是乱糟糟的。</li>
<li>写一篇研究生发展路线规划，从哪些方向入手， 重点培养哪些能力，落实到实处究竟干些什么。宗旨是：<strong>脚踏实地，拒绝拖延，沉得住气，积少成多！</strong></li>
</ul>
<h2 id="2021-7-30"><a href="#2021-7-30" class="headerlink" title="2021.7.30"></a>2021.7.30</h2><p>今日完成：</p>
<ul>
<li>手写<code>tp,fp</code>计算，完成太赫兹第一阶段</li>
<li>整理所有博客，同时撰写研究生发展计划</li>
</ul>
<p>明日计划：</p>
<ul>
<li>找<code>3D</code>目标检测/自动驾驶领域的多模态融合，更重要的是开源项目，留着下周学习</li>
<li>写周报</li>
<li>把目标检测的博客写完，其实可以写一个目标检测评价指标的博客</li>
<li>心理学前两章(这个可以留到后天)</li>
</ul>
<h2 id="2021-7-31"><a href="#2021-7-31" class="headerlink" title="2021.7.31"></a>2021.7.31</h2><p>今日完成：</p>
<ul>
<li><p>找多模态(目标检测、自动驾驶)的资料，其主要学习点有：</p>
<ul>
<li>融合时机</li>
<li>融合策略</li>
</ul>
</li>
<li><p>目标检测博客完成，同时加入了<code>tpfp</code>的计算</p>
</li>
</ul>
<p>明日计划(下周一计划)：</p>
<ul>
<li>周一周二学习多模态融合，并记录写一篇博客，最后出两个方案，一个特征融合，一个决策融合</li>
<li>周一周二对张伟师兄的方法进行调参，并完善目标检测的博客，同时把代码都整理好</li>
<li>学习一个<code>pytorch</code>实践项目</li>
</ul>
<h2 id="2021-8-4"><a href="#2021-8-4" class="headerlink" title="2021.8.4"></a>2021.8.4</h2><p>今日完成：</p>
<ul>
<li>学习多模态融合，撰写博客，最后出两个方案</li>
<li>对张伟师兄方法进行调参，完善目标检测博客，但从结果来看，好像调参的方法不是很好</li>
</ul>
<p>明日计划：</p>
<ul>
<li>对当下<code>Deepfake</code>方法进行调试，同时考虑如何结合<code>ResNet</code>与语义特征图。</li>
<li>每天五小节的<code>pytorch</code>代码学习</li>
</ul>
<h2 id="2021-8-16"><a href="#2021-8-16" class="headerlink" title="2021.8.16"></a>2021.8.16</h2><p>今日(未来两周计划)：</p>
<ul>
<li>将<code>paper1</code>的想法落地，做好实验，考虑到底行不行</li>
<li>看看太赫兹的问题到底是什么</li>
<li>学习<code>pytorch</code>框架</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/28/test/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/7484348e1e863797925e9869687131b3.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qsc's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/07/28/test/" itemprop="url">test</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-07-28T22:29:15+08:00">
                2021-07-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/17/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E5%85%A5%E9%97%A8%E7%9F%A5%E8%AF%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/7484348e1e863797925e9869687131b3.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qsc's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/07/17/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E5%85%A5%E9%97%A8%E7%9F%A5%E8%AF%86/" itemprop="url">目标检测基础知识</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-07-17T16:35:32+08:00">
                2021-07-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/detection/" itemprop="url" rel="index">
                    <span itemprop="name">detection</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="一、目标检测基础知识"><a href="#一、目标检测基础知识" class="headerlink" title="一、目标检测基础知识"></a>一、目标检测基础知识</h2><p><strong>写在前面：</strong>本来这点知识是最初入门<code>CV</code>时学的，但是没想到用在实践中这么地不堪一击，因此决心要脚踏实地，一点一点来。</p>
<ul>
<li><p><code>IOU</code>：交并比，指两个<code>Anchor</code>的面积交集比上并集、</p>
</li>
<li><p>混淆矩阵：这个概念在分类中是搞得很清楚的，<code>TP/FP/TN/FN</code>分别对应真阳、假阳、真阴、假阴性。</p>
</li>
<li><p><code>Faster RCNN(anchor)</code>方法中如何生成最终的结果<code>(NMS)</code>：</p>
<p>对于生成的<code>BBox</code>集合，采用以下方法：</p>
<pre><code>选prediction cls 分数最高的作为该anchor的类别；
对所有的anchor，将分数低于score_thr的都扔掉(这一点与分类要区别开，因为分类就算分数低，也是这张图片的结果，必须得要)
for category in categories:
    首先prediction cls最高的分数anchor
    用这个框，按顺序与其他框计算IOU，当IOU大于一定时，将那个框扔掉
    接着回到上一步，选次大的anchor作为第二个预测框，依次计算
最终得到了预测结果
</code></pre>
<p><strong>而在DETR中，是没有NMS的，由于Set prediction的思想，因此query全部作为预测框，但是在测试的时候，又会经过一些处理，这时我们可以拿这个结果与测试集手动计算！！！</strong></p>
</li>
<li><p><code>TP/FP</code>：</p>
<ul>
<li><p>首先要区分分类与目标检测的不同，对于分类任务而言，<code>TN/FN</code>是有用的，而在目标检测中，通过后期的<code>NMS</code>处理后，对于某一类别，我生成的<code>anchor</code>，只要预测成这一类别，就因此肯定是正例，因此重点就在于如何计算<code>TP/FP</code></p>
</li>
<li><p>对于单张图片的某一类别而言，以下图为例</p>
<p><img src="/2021/07/17/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E5%85%A5%E9%97%A8%E7%9F%A5%E8%AF%86/1627523370794.png" alt="1627523370794"></p>
</li>
</ul>
</li>
</ul>
<pre><code>def tpfp_func(det_bbox, gt_bbox, iou_thr = 0.5):    # 输入一张图片一个类别的预测框与label
    
    # 读取det与gt的数量
    num_dets = det_bboxes.shape[0]
    num_gts = gt_bboxes.shape[0]
    
    # 开一个数组，对det_box的fp与tp记录
    record = np.zeros((num_dets), dtype=np.float32)
    
    # 如果gt == 0，那么都是fp
    return record
    
    # 如果存在gt，那么计算gt与det最大iou的匹配：
    ious = bbox_overlaps(det_bboxes, gt_bboxes)
    # 从置信度高到低开始，依次记录fp与tp
    for det in dets：
        如果当前det的最大iou&lt;iou_thr,则为fp
        如果大于：
            判断是否是该gt的首次匹配，如果是首次匹配，则为tp
            否则为fp

def tpfp_fun(gt_bbox, det_bbox, iou_thr=0.5):

    tpfp = np.zeros(len(det_bbox))    # tpfp数组记录
    if len(gt_bbox) == 0:            # 如果gt=0，说明检测出来的都是fp
        tpfp = tpfp.tolist()
        return tpfp
    
    # 将det_bbox分开，同时再复制一个score用于索引，一个visited用于记录
    pred_bbox = [box[0:4] for box in det_bbox]
    pred_score = [box[4] for box in det_bbox]
    score_idx = pred_score
    gt_bbox_visit = np.zeros(len(gt_bbox))
    pred_score.sort(reverse = True)

    # 将bbox按照score从大到小的顺序，依次判断，同时将匹配的gt记录
    ious = calculate_iou(gt_bbox, pred_bbox)
    max_iou = np.max(ious, axis=0)
    max_iou_idx = np.argmax(ious, axis=0)
    for i in range(len(pred_bbox)):
        idx = score_idx.index(pred_score[i])
        if max_iou[idx] &gt; iou_thr:
            if gt_bbox_visit[max_iou_idx[idx]] == 0:
                tpfp[idx] = 1
                gt_bbox_visit[max_iou_idx[idx]] = 1
            else:
                continue
        else:
            continue
    tpfp = tpfp.tolist()
    return tpfp
</code></pre>
<p><strong>值得注意：分类任务注重于score的大小，从而利用AUC来做评价指标，而检测任务是存在数量的问题，因此更重要的AP，而是对于某一类来说，不存在负样本，只要生成确定了这个anchor，就一定是tp或者是fp。</strong></p>
<ul>
<li><p><code>Faster RCNN loss</code>：</p>
<p><img src="/2021/07/17/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E5%85%A5%E9%97%A8%E7%9F%A5%E8%AF%86/1627525303190.png" alt="1627525303190"></p>
<p>注意，这个<code>loss</code>是正常的<code>loss</code>，但是在计算<code>loss</code>之前，有一步<code>anchor</code>与<code>gt</code>的匹配问题。<strong>这个以后需要的话，再去仔细研究</strong></p>
</li>
<li><p><code>precision：</code>查准率，预测对的结果比上预测结果。</p>
</li>
<li><p><code>Recall：</code>召回率，预测对的结果比上真实结果</p>
</li>
<li><p><code>AP:</code>大多数情况下，我们希望<code>precision、recall</code>都很高，但这其实是一件矛盾的事情，因此类比于<code>TPR/FNR</code>一样，我们可以画出<code>PR</code>曲线。但其实，<code>score/iou</code>的阈值都会影响到<code>AP</code></p>
</li>
<li><p><code>MAP</code>：指的是所有类别的平均<code>AP</code></p>
</li>
</ul>
<p><strong>因此在MMdetection框架中，想对DETR加上清洗的话，得自己写score：</strong></p>
<ol>
<li>不管训练，测试完在代码里加上，然后存入</li>
<li>利用<code>demo</code>得到结果，然后手写，统计计算</li>
<li>训练的话， 应该还是同<code>1</code>的想法</li>
</ol>
<p><strong>最终选择第二种方式来计算了</strong></p>
<h2 id="二、目标检测数据集清洗"><a href="#二、目标检测数据集清洗" class="headerlink" title="二、目标检测数据集清洗"></a>二、目标检测数据集清洗</h2><p>一个对数据集良好的清洗，可在训练的过程中，提升一些，因此我用太赫兹的数据集为例，总结一些常用的数据清洗。</p>
<p><strong>图像大小分布：</strong>对图像的大小进行统计，在太赫兹数据集中，图像均为<code>(400, 760)</code></p>
<p><strong>GT_BBox的大小分布：</strong>对真实<code>bbox</code>的大小进行统计，有利于设定<code>anchor</code>，例如在本数据集中，<code>gt_bbox</code>的大小分布如下：</p>
<p><img src="/2021/07/17/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E5%85%A5%E9%97%A8%E7%9F%A5%E8%AF%86/Users\www11\AppData\Roaming\Typora\typora-user-images\1627713419843.png" alt="1627713419843"></p>
<p>可以看到基本上在<code>(20, 80)</code>之间，因此在设计<code>anchor</code>时，可以进一步考虑</p>
<p><strong>每类目标数统计：</strong>有利于直观看到每类的数量，判断是否存在类间不平衡的情况</p>
<p><strong>每张图片目标数量统计：</strong>直观观察每张图片的目标数量，判断是否在图片中存在着极其不平衡的现象</p>
<p><strong>每类长宽比：</strong>这个其实与<code>GT_bbox</code>是类似的</p>
<p><strong>注意：其实这些指标需要记住，但是代码写起来是非常简单的，在此基础上额外多了一个plt的画图而已</strong></p>
<h2 id="三、MMdetection检测框架使用"><a href="#三、MMdetection检测框架使用" class="headerlink" title="三、MMdetection检测框架使用"></a>三、MMdetection检测框架使用</h2><h3 id="3-1-环境搭建"><a href="#3-1-环境搭建" class="headerlink" title="3.1 环境搭建"></a>3.1 环境搭建</h3><p>其实这个框架的环境还是蛮好搭建的，但是一定要搞清楚两个事情：</p>
<ul>
<li>必须在<code>linux</code>下进行</li>
<li><code>cuda</code>、<code>gpu</code>这些版本一定要对应，否则就会发生意料之外的错误</li>
</ul>
<p>其实官方教程已经说的很清楚了，这里我再将命令行汇总一遍：</p>
<pre><code>conda create -n open-mmlab python=3.7 -y
conda activate open-mmlab

# 这个要根据自己的电脑，然后在pytorch的官网用官方命令
conda install pytorch==1.6.0 torchvision==0.7.0 cudatoolkit=10.1 -c pytorch -y

# 这句话是根据上一句pytorch的版本决定的
pip install mmcv-full -f https://download.openmmlab.com/mmcv/dist/cu101/torch1.6.0/index.html

# install mmdetection
git clone https://github.com/open-mmlab/mmdetection.git
cd mmdetection
pip install -r requirements/build.txt
pip install -v -e .
</code></pre>
<p><strong>有一点需要注意，当你如果更改了mmdetection文件夹的名字时，是需要重新bulid的</strong></p>
<h3 id="3-2-使用教程"><a href="#3-2-使用教程" class="headerlink" title="3.2 使用教程"></a>3.2 使用教程</h3><p>这个框架其实使用起来非常方便，你只需要将你的数据集格式修改成<code>VOC</code>或者<code>COCO</code>的格式，然后放到文件夹中，接着修改一些信息即可，主要按照如下步骤：</p>
<ol>
<li><p>上传数据集，在主文件夹下创建<code>data</code>文件夹，然后将自己的数据按照对应格式放入，如图所示：</p>
<p><img src="/2021/07/17/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E5%85%A5%E9%97%A8%E7%9F%A5%E8%AF%86/Users\www11\AppData\Roaming\Typora\typora-user-images\1627715134388.png" alt="1627715134388"></p>
</li>
<li><p>修改<code>mmdet/evaluation/mean_ap.py</code>文件，可以加上你需要的<code>precision</code>、<code>F1</code>指标</p>
</li>
<li><p>修改对<code>VOC</code>/<code>COCO</code>数据集的设计管理文件：</p>
<ul>
<li><p>在<code>mmdet/datasets/voc</code>中，修改成你所需要的类，针对训练。</p>
</li>
<li><p>在<code>mmdet/core/evaluation/classname</code>中，修改类名，针对评估与测试。</p>
</li>
</ul>
</li>
<li><p>在主文件中，生成一个你自己的<code>config</code>文件，尽量避免在原<code>config</code>文件中修改，这里拿<code>atss</code>举例，运行命令行：</p>
<pre><code>python tools/misc/print_config.py configs/atss/atss_r50_fpn_1x_coco.py
</code></pre>
<p>在自己的<code>config</code>文件夹中，生成一个<code>my_atss.py</code>文件，将打印的信息全部粘贴到该文件下，接着我们对该文件进行相对应的修改即可。</p>
</li>
<li><p>在自己的<code>config</code>文件里，修改如下配置：</p>
<ul>
<li><p><code>img_scale</code>：修改成你对应的图像大小</p>
</li>
<li><p><code>batch/lr/step</code>：最初始的是<code>16</code>张图片的学习率，你根据自己的<code>batch</code>然后对学习率进行成倍数的缩小</p>
</li>
<li><p>数据路径：修改成如下格式：</p>
<p><img src="/2021/07/17/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E5%85%A5%E9%97%A8%E7%9F%A5%E8%AF%86/Users\www11\AppData\Roaming\Typora\typora-user-images\1627716105341.png" alt="1627716105341"></p>
</li>
<li><p><code>metric</code>：如果是<code>VOC</code>格式，需要改成<code>mAP</code></p>
</li>
<li><p><code>class,score</code>：其中<code>class</code>需要改成自己的类别数量，<code>score</code>是用于测试评估的</p>
</li>
</ul>
</li>
<li><p>在修改好配置文件后，就可以运行训练了，其中训练命令为：</p>
<pre><code>./tools/dist_train.sh qsc/my_atss_r50_fpn_1x_coco.py 2(gpu数量)  # 多GPU
python tools/train.py qsc/my_atss_r50_fpn_1x_coco.py            # 单GPU
</code></pre>
</li>
<li><p>训练好之后，会自动生成一个<code>work_dir</code>的文件夹，采用如下命令进行测试，一般测试时需要看<code>fps</code>与<code>mem</code>，因此都采用单卡：</p>
<pre><code>python tools/test.py work_dir/my_atss_r50_fpn_1x_coco/my_atss_r50_fpn_1x_coco.py work_dir/my_atss_r50_fpn_1x_coco/epoch_36.pth --eval mAP
</code></pre>
</li>
<li><p>将模型进行可视化，需修改<code>demo</code>文件中<code>image_demo.py</code>文件，接着采用如下命令：</p>
<pre><code>python demo/image_demo.py demo/test.jpg work_dir/my_atss_r50_fpn_1x_coco/my_atss_r50_fpn_1x_coco.py work_dir/my_atss_r50_fpn_1x_coco/epoch_36.pth
</code></pre>
</li>
</ol>
<p>以上就是<code>mmdetection</code>框架最简单的使用方式，通过此方式就可以实现很多<code>sota</code>的目标检测模型</p>
<h3 id="3-3-调参Tricks"><a href="#3-3-调参Tricks" class="headerlink" title="3.3 调参Tricks"></a>3.3 调参Tricks</h3><ol>
<li><p>根据<code>gt_bbox</code>的长宽分布，从而确定<code>anchor</code>的设置。具体到代码中，修改如下参数：</p>
<pre><code>anchor_rations = [0.5, 1.0, 2.0]
</code></pre>
</li>
<li><p><code>Albu</code>数据增广 ，这个要看具体任务，受不受光照、形变等影响，像太赫兹任务中，就不需要进行很多的数据增广问题，但可以考虑随机生成<code>abnormal</code>样本</p>
</li>
<li><p>多尺度训练与测试, 这个也要看数据集,因为这里就根本不需要多尺度</p>
</li>
<li><p>利用软化非极大值抑制策略,  代码如下:</p>
<pre><code>rcnn=dict(score_thr=0.05, nms=dict(type=&#39;soft_nms&#39;, iou_thr=0.5, min_score=0.001), max_per_img=100)
</code></pre>
</li>
<li><p>一般情况下,用<code>GIoULoss</code>会比<code>L1Loss</code>涨点, 具体代码如下:</p>
<pre><code>reg_decoded_bbox=True,     # 使用GIoUI时注意添加
loss_bbox=dict(type=&#39;GIoULoss&#39;, loss_weight=5.0)
</code></pre>
</li>
</ol>
<p>**肯定还有许多tricks我没有用到, 这是一个经验积累的过程, 慢慢将遇到的方法在此记录就好了. **</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/09/TaiHezi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/7484348e1e863797925e9869687131b3.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qsc's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/07/09/TaiHezi/" itemprop="url">TaiHezi</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-07-09T10:10:30+08:00">
                2021-07-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="一、太赫兹项目"><a href="#一、太赫兹项目" class="headerlink" title="一、太赫兹项目"></a>一、太赫兹项目</h2><p>属于一个目标检测的项目，也是一个类似于自动驾驶领域的多模态项目。</p>
<h2 id="二、项目介绍"><a href="#二、项目介绍" class="headerlink" title="二、项目介绍"></a>二、项目介绍</h2><p>这是一个目标检测任务，其主要需求如下：</p>
<ul>
<li>检测出每张图片中的违禁物品</li>
<li>通过五张正面/背面角度的图片，将最终的结果全部汇总到正面或者背面上去</li>
</ul>
<p>其验收准则有三：</p>
<ul>
<li><p>速度：单人检测不超过<code>1s</code>，其中包括单张检测与汇总结果</p>
</li>
<li><p>准确率不低于<code>95%</code></p>
</li>
<li><p>误检率不高于<code>5%</code></p>
</li>
</ul>
<h2 id="三、当下甲方存在的问题"><a href="#三、当下甲方存在的问题" class="headerlink" title="三、当下甲方存在的问题"></a>三、当下甲方存在的问题</h2><ul>
<li>误检率比较高，个人感觉这是数据集的问题，也有可能是模型本身的问题。</li>
<li>对于多模态，甲方没有任何想法</li>
</ul>
<h2 id="四、阶段发展总结"><a href="#四、阶段发展总结" class="headerlink" title="四、阶段发展总结"></a>四、阶段发展总结</h2><h3 id="4-1-2021-7-12-第一次交流"><a href="#4-1-2021-7-12-第一次交流" class="headerlink" title="4.1 2021.7.12 第一次交流"></a>4.1 2021.7.12 第一次交流</h3><ul>
<li><p>问题：数据量少，标注差</p>
</li>
<li><p>算法：<code>Faster RCNN、ATSS、Deformerable DETR</code>，师兄自己的<code>paper</code></p>
</li>
<li><p>效果：</p>
<ul>
<li>准确率在<code>90%</code>以上</li>
<li>误检率在<code>10</code>以下</li>
</ul>
</li>
<li><p>交流结果：</p>
<ul>
<li>甲方出一个大一点、标注效果好一点的数据集</li>
<li>我们自己重新实验，对比精确率与召回率</li>
</ul>
</li>
</ul>
<h3 id="4-2-2021-7-30-第一阶段结束"><a href="#4-2-2021-7-30-第一阶段结束" class="headerlink" title="4.2 2021.7.30 第一阶段结束"></a>4.2 2021.7.30 第一阶段结束</h3><ul>
<li><p>算法：<code>Deformerable DETR</code>与师兄自己的<code>paper</code></p>
</li>
<li><p>效果：</p>
<ul>
<li>准确率<code>96%</code></li>
<li>误检率<code>4.4%</code></li>
</ul>
</li>
<li><p>下一步计划：</p>
<ul>
<li>借鉴自动驾驶中的多模态思想，先看一些论文，再考虑后面的事情</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/06/%E7%AC%AC%E4%B8%80%E7%AF%87%E8%AE%BA%E6%96%87%E8%AE%B0%E5%BD%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/7484348e1e863797925e9869687131b3.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qsc's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/07/06/%E7%AC%AC%E4%B8%80%E7%AF%87%E8%AE%BA%E6%96%87%E8%AE%B0%E5%BD%95/" itemprop="url">第一篇论文记录</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-07-06T11:14:52+08:00">
                2021-07-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Deepfake/" itemprop="url" rel="index">
                    <span itemprop="name">Deepfake</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>写在前面：</strong>用这篇博客来记录第一篇论文的前前后后，也算是一个总结吧。</p>
<h2 id="一、论文发表发展经历"><a href="#一、论文发表发展经历" class="headerlink" title="一、论文发表发展经历"></a>一、论文发表发展经历</h2><p>1.首先是去年10月份拿到的这个方向，大概简略地看了<code>Deepfake</code>的攻击与防御，差不多看到了第二年的一月份，然后确定了实验的对比方向与大概的方法。</p>
<p>2.然后从1月到5月是毕设，正好就开始训练<code>VIT</code>模型，利用<code>ResNet+Transformer</code>的方法可以在<code>FF++</code>的<code>baseline</code>上达到一个相对较好的水平，因此觉得可以在这个方法上继续深入探究。</p>
<p>3.确定我这个进一步细致的<code>idea</code>我记得特别清楚，是在<code>4.10</code>那天，但是因为毕设、毕业玩耍等乱七八糟的事情，一直拖到现在。期间学习了一下如何编写语义分割的代码，还是比较头疼的。</p>
<p>4.然后从<code>7</code>月份开始可以说正式开始这篇论文努力地实验、细化方法等等。</p>
<h2 id="二、Idea概括"><a href="#二、Idea概括" class="headerlink" title="二、Idea概括"></a>二、Idea概括</h2><p>​    由于<code>Deepfake</code>说到底是一个二分类任务，同时由于脸部伪造痕迹的存在、以及<code>blending</code>的边缘痕迹明显，因此我的<code>idea</code>总结如下：</p>
<p>1.利用<code>Transformer</code>针对脸部的不一致性建模，从而检测。</p>
<p>2.针对纯<code>VIT</code>模型，我们认为直接将图片进行编码是一件很蠢的事情，首先直观考虑是利用<code>ResNet</code>对图片进行编码，但是由于<code>VIT</code>的特性，我们仅能用两个<code>Stage</code>的<code>ResNet</code>，其次我们考虑使用语义分割所训练的网络，从而来指导在伪造图像中，伪造区域与原区域的不一致性问题，接着将特征图放入<code>VIT</code>中进行建模。</p>
<p>3.对于<code>SA</code>模块来说，我们认为有两点需要改进的地方。首先针对其速度，我们需要利用<code>CNN</code>来替代线性计算，同时针对特征图中尺度不一的伪造痕迹，我们认为应该在<code>SA</code>中构造多尺度模块，从而来增强模型的鲁棒性。</p>
<h2 id="三、每周总结"><a href="#三、每周总结" class="headerlink" title="三、每周总结"></a>三、每周总结</h2><p><strong>2021.6.28~2021.7.4：</strong></p>
<p>1.做了初步的<code>Seg</code>+<code>Res</code>+<code>VIT</code>的实验，效果不是很理想，结果如下：</p>
<p><img src="/2021/07/06/%E7%AC%AC%E4%B8%80%E7%AF%87%E8%AE%BA%E6%96%87%E8%AE%B0%E5%BD%95/1625447955928.png"></p>
<p>2.利用<code>Res+VIT</code>在<code>Fmfcc</code>数据集上也做了测试，效果只能说凑合，不过得出了一些结论：</p>
<p>​    2.1 训练时数据增广是一件非常重要的事情，一定要做数据增广</p>
<p>​    2.2 在切分数据集时，最好要用<code>RetinalFace</code>来脸部区域，使用<code>Dlib</code>库会丢掉很多变形的脸部。</p>
<p><strong>2021.7.5~2021.7.11：</strong></p>
<p>1.重新在<code>Fmfcc</code>数据集上进行实验，采用严格的数据处理方式，在训练集中构造了<code>50W</code>个样本，分别训练<code>VIT、Xception、ResNet+VIT</code>，看效果如何。</p>
<p>2.调试<code>Idea</code>失败的实验，其中包括两部分的内容：</p>
<p>​    2.1 找出在原实验中，出错误的点在何处，其中包括：</p>
<ul>
<li>代码问题：卷积核使用了偶数大小、自己的卷积效果不好、没有加<code>BN/Relu</code>等</li>
<li>语义分割部分：考虑对语义分割的训练过程是不是不好，从而导致在融合时特征图不咋样。</li>
<li>训练问题：可能是参数设置有问题？调参解决</li>
<li>特征融合策略：采用简单的<code>add/cat</code>可能无法很好地利用二者的特征，应设计一个模块来专门解决该问题。</li>
</ul>
<p>​    2.2 考虑语义分割与分类网络在特征上如何更好地融合</p>
<p><strong>2021.7.30:</strong></p>
<p>最近三周的时间一直在做太赫兹的事情，没有时间管理论文，这个方向再给自己一个月的时间调整，如果实验结果不理想的话，我觉得要放弃，因为这个最重要的问题在于我对<code>transformer</code>的理解还是很浅薄，导致没有什么实质上的进展。</p>
<p>另外就是在主动防御上，考虑可不可以先发个论文试试看。</p>
<p>最后就是要自己找一个新坑，然后去发掘，这样从最初始的<code>idea</code>就可以吸引专家。</p>
<p><strong>2021.8.16：</strong></p>
<ul>
<li>语义分割这里存在问题，模型效果整体不好，同时考虑是否加入边缘监督从而强调边缘特征，对图片的<code>label</code>进一步修正</li>
<li>联合训练：应该对语义分割的权重学习率降到很低，甚至不变</li>
<li>考虑两个特征的融合模块</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/04/02/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-win10%E3%80%81linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/7484348e1e863797925e9869687131b3.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qsc's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/04/02/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-win10%E3%80%81linux/" itemprop="url">深度学习环境搭建(win10、linux)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-04-02T15:26:40+08:00">
                2021-04-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>写在前面：</strong></p>
<p>​    这篇文章主要是介绍深度学习环境的搭建，本来是打算写<code>windows/Linux</code>两个版本的，但是<code>Linux</code>用习惯之后，也就摒弃了<code>windows</code>版本，这里只介绍<code>Linux</code>版本，其<code>OS</code>为<code>Ubuntu</code>。</p>
<h2 id="一、Anaconda环境准备"><a href="#一、Anaconda环境准备" class="headerlink" title="一、Anaconda环境准备"></a>一、Anaconda环境准备</h2><p>​    在深度学习的环境中，少不了的是<code>conda</code>，有了这个东西，就可以创建多个深度学习环境，其不会相互干扰，需要用哪个就切换就可以了，这里就首先介绍<code>Anaconda</code>的环境准备。</p>
<h2 id="二、Python环境准备"><a href="#二、Python环境准备" class="headerlink" title="二、Python环境准备"></a>二、Python环境准备</h2><h2 id="三、CUDA环境准备"><a href="#三、CUDA环境准备" class="headerlink" title="三、CUDA环境准备"></a>三、CUDA环境准备</h2><h2 id="四、Pytorch安装"><a href="#四、Pytorch安装" class="headerlink" title="四、Pytorch安装"></a>四、Pytorch安装</h2><h2 id="五、Tensorflow-gpu安装"><a href="#五、Tensorflow-gpu安装" class="headerlink" title="五、Tensorflow-gpu安装"></a>五、Tensorflow-gpu安装</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/04/02/%E8%B0%83%E5%8F%82%E6%8A%80%E5%B7%A7-Linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/7484348e1e863797925e9869687131b3.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qsc's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/04/02/%E8%B0%83%E5%8F%82%E6%8A%80%E5%B7%A7-Linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BD%BF%E7%94%A8/" itemprop="url">调参技巧/Linux命令行使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-04-02T15:11:06+08:00">
                2021-04-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9D%82%E8%B0%88/" itemprop="url" rel="index">
                    <span itemprop="name">杂谈</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>写在前面：</strong></p>
<p>​    这篇文章用来记录我在训练深度学习过程中积累的一些调参技巧、<code>linux</code>命令行使用过程中的一点心得体会。</p>
<h2 id="一、调参技巧"><a href="#一、调参技巧" class="headerlink" title="一、调参技巧"></a>一、调参技巧</h2><p><strong>pytorch多GPU训练：</strong></p>
<p>多<code>GPU</code>训练分为一机多卡与多机多卡，由于经费有限，这里只介绍一机多卡：</p>
<pre><code>model = Net()
model = torch.nn.DataParallel(model, device_ids=[0,1,2,3])
model.cuda()
</code></pre>
<p>没错，正如你所看到的一样，就是这么简单。</p>
<p><strong>tensorboard启动：</strong></p>
<p>具体<code>tensorboard</code>使用教程请参照另一篇博客，这里只介绍启动技巧：</p>
<pre><code>tensorboard --logdir=./runs
</code></pre>
<p><strong>pip安装包时换源：</strong></p>
<pre><code>pip install xxx -r https://pypi.douban.com/simple/
</code></pre>
<p><strong>ToTensor：</strong></p>
<p>该函数有自动更改维度的功能，调用前是：<code>(H,W,C)</code>，调用后是<code>(C,H,W)</code></p>
<p><strong>图片出错：</strong></p>
<p>首先先加载一轮，输出图片的<code>path</code></p>
<p><strong>常用的防止过拟合方法：</strong></p>
<pre><code># 优化器层面：
weight_decay
    在每个batch跑完之后，optimizer.step()
lr_scheduler
    在一轮结束之后，lr.step()
# 网络方面：
正则化
Droupout
</code></pre>
<p><strong>给不同网络层设置不同的学习参数：</strong></p>
<pre><code>dense_block1_params = list(map(id, model.patch_embed.backbone.block1.parameters()))
dense_block2_params = list(map(id, model.patch_embed.backbone.block2.parameters()))
dense_block3_params = list(map(id, model.patch_embed.backbone.block3.parameters()))
base_params = filter(lambda p: id(p) not in dense_block1_params + dense_block2_params + dense_block3_params, model.parameters())
params = [&#123;&#39;params&#39;: base_params&#125;,
          &#123;&#39;params&#39;: model.patch_embed.backbone.block1.parameters(), &#39;lr&#39;: lr * 0.125 &#125;,
          &#123;&#39;params&#39;: model.patch_embed.backbone.block2.parameters(), &#39;lr&#39;: lr * 0.25&#125;,
          &#123;&#39;params&#39;: model.patch_embed.backbone.block3.parameters(), &#39;lr&#39;: lr * 0.5&#125;
]
</code></pre>
<p><strong>pytorch最简单的方式自定义网络：</strong></p>
<pre><code>class Dense(nn.Module):

    def __init__(self, conv0, norm0, pool0, block1, trans1, block2, trans2, block3):
        super(Dense, self).__init__()
        self.conv0 = conv0
        self.norm0 = norm0
        self.pool0 = pool0
        self.block1 = block1
        self.trans1 = trans1
        self.block2 = block2
        self.trans2 = trans2
        self.block3 = block3
        self.BN = nn.BatchNorm2d(1280)
        self.ACT = nn.ReLU(inplace=True)

    def forward(self, x):
        conv0 = self.conv0(x)
        norm0 = self.norm0(conv0)
        pool0 = self.pool0(norm0)
        denseblock1 = self.block1(pool0)
        transition1 = self.trans1(denseblock1)
        denseblock2 = self.block2(transition1)
        transition2 = self.trans2(denseblock2)
        denseblock3 = self.block3(transition2)
        bn = self.BN(denseblock3)
        act = self.ACT(bn)
        return act
</code></pre>
<h2 id="二、Linux命令行技巧"><a href="#二、Linux命令行技巧" class="headerlink" title="二、Linux命令行技巧"></a>二、Linux命令行技巧</h2><p><strong>Ubuntu统计文件个数：</strong></p>
<p>1.统计当前文件夹内文件数量且包含子目录中的文件数量，命令如下：</p>
<pre><code>ls -lR|grep &quot;^-&quot;| wc -l
</code></pre>
<p>2.统计当前文件夹内文件数量且不包含子目录文件数量，命令如下：</p>
<pre><code>ls -l|grep &quot;^-&quot;| wc -l
</code></pre>
<p>3.统计当前文件夹下的目录个数且包含子目录，命令如下：</p>
<pre><code>ls -lR|grep &quot;^d&quot;| wc -l
</code></pre>
<p>4.统计当前文件夹下的目录个数，命令如下：</p>
<pre><code>ls -l |grep &quot;^d&quot;| wc -l
</code></pre>
<p>5.统计包含部分前缀，命令如下：</p>
<pre><code>ls -lR data*/|grep &quot;^-&quot;| wc -l # data*/ 代表统计前缀为data的文件
</code></pre>
<p>6.查看当前目录下每个文件夹的大小，命令如下：</p>
<pre><code>du -h --max-depth=1 
</code></pre>
<p><strong>unzip使用：</strong></p>
<p>1.把文件解压到当前目录下：</p>
<pre><code>unzip test.zip
</code></pre>
<p>2.如果要把文件解压到指定的目录下，需要用到<code>-d</code>参数：</p>
<pre><code>unzip -d /temp test.zip
</code></pre>
<p>3.解压的时候，有时候不想覆盖已经存在的文件，那么可以加上<code>-n</code>参数：</p>
<pre><code>unzip -n test.zip
unzip -n -d /temp test.zip
</code></pre>
<p><strong>Ubuntu sudo python路径修改：</strong></p>
<p>首先找到要更改后的<code>python</code>的安装路径，例如：<code>/home/anaconda3/envs/qsc/bin/python</code></p>
<p>1.备份：</p>
<pre><code>sudo cp /usr/bin/python /usr/bin/python_bak
</code></pre>
<p>2.删除指向：</p>
<pre><code>sudo rm /usr/bin/python
</code></pre>
<p>3.修改路径：</p>
<pre><code>sudo ln -s /home/sss/anaconda3/bin/python /usr/bin/python
</code></pre>
<p><strong>ubuntu给文件赋权限：</strong></p>
<pre><code>sudo chmod 777 xxx.txt # 给一个文件赋权限
sudo chmod -R 777 xxx/ # 给这个文件夹整个赋权限
</code></pre>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/24/DeepFaceLab%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/7484348e1e863797925e9869687131b3.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qsc's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/24/DeepFaceLab%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/" itemprop="url">DeepFaceLab使用教程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-24T00:00:00+08:00">
                2021-03-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/DeepFake/" itemprop="url" rel="index">
                    <span itemprop="name">DeepFake</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>写在前面：</strong>本篇文章旨在帮助大家快速搭建<code>Linux</code>版本的<code>DeepFaceLab</code>，不注意调参等细节。</p>
<h2 id="一、环境搭建"><a href="#一、环境搭建" class="headerlink" title="一、环境搭建"></a>一、环境搭建</h2><h3 id="1-1-基本环境配置"><a href="#1-1-基本环境配置" class="headerlink" title="1.1 基本环境配置"></a>1.1 基本环境配置</h3><p><strong>python=3.7</strong></p>
<p><strong>FFMpeg</strong></p>
<p><strong>Git</strong></p>
<p>最新的<code>Nvidia</code>显卡，这里是<code>CUDA 11</code>，因为代码用的是<code>tensorflow-gpu==2.4.0</code>，关于如何在<code>linux</code>中搭建<code>tensorflow-gpu/pytorch</code>环境请参照另一篇博客：</p>
<p><a target="_blank" rel="noopener" href="https://qsc-1999.github.io/2021/04/02/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-win10%E3%80%81linux/">https://qsc-1999.github.io/2021/04/02/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-win10%E3%80%81linux/</a></p>
<h3 id="1-2-环境搭建步骤"><a href="#1-2-环境搭建步骤" class="headerlink" title="1.2 环境搭建步骤"></a>1.2 环境搭建步骤</h3><p>采用以下命令行：</p>
<pre><code># 利用conda创建环境
conda create -n deepfacelab -c main python=3.7 cudnn=7.6.5 cudatoolkit=10.1.243
conda activate deepfacelab
# 将linux版本的脚本拷贝
git clone https://github.com/nagadit/DeepFaceLab_Linux.git
cd DeepFaceLab_Linux
# 将整个项目拷贝
git clone --depth 1 https://github.com/iperov/DeepFaceLab.git
# 安装所需要的环境
pip install -r ./DeepFaceLab/requirements-cuda.txt
</code></pre>
<p>其中在安装<code>h5py</code>时，要求版本为<code>2.10.0</code>，这里需要自行修改。</p>
<p>最终的文件目录结构如下：</p>
<pre><code>/DeepFaceLab_Linux：
    /DeepFaceLab：#DeepFaceLab代码
    /scripts：     #Linux运行版本脚本
    /workspace：  #视频处理
</code></pre>
<h3 id="1-3-Workshop准备"><a href="#1-3-Workshop准备" class="headerlink" title="1.3 Workshop准备"></a>1.3 Workshop准备</h3><p>准备两个视频，分别命名为：<code>data_dst.mp4/data_src.mp4</code>。</p>
<p>之后就可以开始我们的<code>DeepFaceLab</code>之旅！</p>
<p>​</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/7484348e1e863797925e9869687131b3.jpg"
                alt="" />
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">qishicheng</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
